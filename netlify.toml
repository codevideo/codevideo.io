[build]
  command = "cd functions && npm install && npm run build && cd .. && npm run build"
  publish = "public"
  functions = "functions/dist"

[dev]
  command = "gatsby develop"
  port = 8888
  publish = "public"
  functions = "functions/dist"

[context.dev]
  environment = { GATSBY_API_URL = "http://localhost:3000" }

[context.staging]
  environment = { GATSBY_API_URL = "https://staging.api.codevideo.io" }

[context.production]
  environment = { GATSBY_API_URL = "https://api.codevideo.io" }


[[headers]]
  for = "/*"
  [headers.values]
    Cross-Origin-Embedder-Policy = "require-corp"
    Cross-Origin-Opener-Policy = "same-origin"

[[plugins]]
  package = "@netlify/plugin-gatsby"